<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reverse Parallax Timeline</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="./road.css">
  <style>
 @import url("https://fonts.googleapis.com/css?family=Playfair+Display+SC:900");
 :root {
  --scenePerspective: 1;
  --scenePerspectiveOriginX: 50;
  --scenePerspectiveOriginY: 30;
  --itemZ: 2;
  --cameraSpeed: 150;
  --cameraZ: 0;
  --viewportHeight: 0;
}

html{
  scrollbar-width: none;
}

body{
}

.viewport {
  height: calc(var(--viewportHeight) * 1px);
}
.scene3D-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  perspective: 150px;
  perspective-origin: 50% 50%;
  will-change: perspective-origin;
  transform: translate3d(0, 0, 0);
  background: linear-gradient(to bottom, skyblue 52%, #83f33e 50%);
}
.scene3D {
  position: absolute;
  top: 0;
  height: 100vh;
  width: 100%;
  transform-style: preserve-3d;
  transform: translateZ(calc(var(--cameraZ) * 1px));
  will-change: transform;
  background: #0000000f;
}
.scene3D > div {
  position: absolute;
  display: block;
  width: 100%;
  top: 40%;
  /* left: 50%; */
}
@media only screen and (min-width: 600px) {
  .viewport .scene3D-container .scene3D > div {
    width: 45%;
  }
}
.viewport .scene3D-container .scene3D > div:nth-child(2n) {
  left: 0;
}
.viewport .scene3D-container .scene3D > div:nth-child(2n+1) {
  right: 0;
}
/* .viewport .scene3D-container .scene3D > div:nth-child(0) {
  transform: translate3D(0%, -160%, calc(var(--itemZ) * var(--cameraSpeed) * 10 * -0.3px)) rotateX('90deg');
} */
.viewport .scene3D-container .scene3D > div:nth-child(1) {
  transform: translate3D(-30%, -90%, calc(var(--itemZ) * var(--cameraSpeed) * 1 * -0.3px));
}
.viewport .scene3D-container .scene3D > div:nth-child(2) {
  transform: translate3D(30%, -90%, calc(var(--itemZ) * var(--cameraSpeed) * 4 * -0.3px));
}
.viewport .scene3D-container .scene3D > div:nth-child(3) {
  transform: translate3D(-30%, -90%, calc(var(--itemZ) * var(--cameraSpeed) * 8 * -0.3px));
}
.viewport .scene3D-container .scene3D > div:nth-child(4) {
  transform: translate3D(30%, -90%, calc(var(--itemZ) * var(--cameraSpeed) * 12 * -0.3px));
}
.viewport .scene3D-container .scene3D > div:nth-child(5) {
  transform: translate3D(-30%, -90%, calc(var(--itemZ) * var(--cameraSpeed) * 16 * -0.3px));
}
.viewport .scene3D-container .scene3D > div:nth-child(6) {
  transform: translate3D(30%, -90%, calc(var(--itemZ) * var(--cameraSpeed) * 18 * -0.3px));
}
.viewport .scene3D-container .scene3D > div:nth-child(7) {
  transform: translate3D(0%, -90%, calc(var(--itemZ) * var(--cameraSpeed) * 20 * -0.3px));
}



/*# sourceMappingURL=scrollanim.css.map */


.Card{
  background: rgb(13, 95, 2);
  box-shadow: 0 8px 32px 0 rgba( 31, 38, 135, 0.37 );
  backdrop-filter: blur( 12px );
  -webkit-backdrop-filter: blur( 12px );
  border-radius: 10px;
  border: 2px solid skyblue;
  border-radius: 8px;
  padding: 20px 25px;
  color: white;
  width: 720px !important;
}



body{
  scrollbar-width: none;
}

.viewport::-webkit-scrollbar{
  display: none;
}
.scene3D-container::-webkit-scrollbar{
  display: none;
}
.scene3D::-webkit-scrollbar{
  display: none;
}

@media screen and (max-width: 500px) {
  :root{
    --viewportHeight: 1000
  }

  .Card{
    width: 250px !important;
    height: 120px !important;
    font-size: 11px;
  }
    /* .viewport .scene3D-container .scene3D > div:nth-child(0) {
    transform: translate3D(-12%, -30%, calc(var(--itemZ) * var(--cameraSpeed) * 10 * -0.3px));
  } */
  .viewport .scene3D-container .scene3D > div:nth-child(1) {
    transform: translate3D(10%, -20%, calc(var(--itemZ) * var(--cameraSpeed) * 1 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(2) {
    transform: translate3D(-10%, -22%, calc(var(--itemZ) * var(--cameraSpeed) * 4 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(3) {
    transform: translate3D(10%, -15%, calc(var(--itemZ) * var(--cameraSpeed) * 7 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(4) {
    transform: translate3D(-10%, -20%, calc(var(--itemZ) * var(--cameraSpeed) * 10 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(5) {
    transform: translate3D(10%, -18%, calc(var(--itemZ) * var(--cameraSpeed) * 13 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(6) {
    transform: translate3D(-10%, -22%, calc(var(--itemZ) * var(--cameraSpeed) * 16 * -0.3px));
  }

  .Road{
    width: 80% !important;
  }
  .Card .Pol{
    height: 150px !important;
    width: 15px !important;
  }
  .Card h2{
    font-size: 14px !important;
  }
  .mountains{
    transform: translate3D(0%, 490%, 0) !important;
  }
  .cloud1{
    top: 70px !important;
    right: 10px !important;
  }
  .cloud2{
    top: 60px;
    left: 30px;
  }
  .trees{
    transform: translate(-220px, 200px) !important;
  }


}

@media screen and (min-width: 600px) and (max-width: 769px) {
  :root{
    --viewportHeight: 1000
  }

  .Card{
    width: 350px !important;
    /* height: 120px !important; */
    font-size: 15px;
  }
    /* .viewport .scene3D-container .scene3D > div:nth-child(0) {
    transform: translate3D(-12%, -30%, calc(var(--itemZ) * var(--cameraSpeed) * 10 * -0.3px));
  } */
  .viewport .scene3D-container .scene3D > div:nth-child(1) {
    transform: translate3D(-20%, -10%, calc(var(--itemZ) * var(--cameraSpeed) * 1 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(2) {
    transform: translate3D(0%, -22%, calc(var(--itemZ) * var(--cameraSpeed) * 4 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(3) {
    transform: translate3D(-20%, -15%, calc(var(--itemZ) * var(--cameraSpeed) * 7 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(4) {
    transform: translate3D(0%, -20%, calc(var(--itemZ) * var(--cameraSpeed) * 10 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(5) {
    transform: translate3D(-20%, -18%, calc(var(--itemZ) * var(--cameraSpeed) * 13 * -0.3px));
  }
  .viewport .scene3D-container .scene3D > div:nth-child(6) {
    transform: translate3D(0%, -22%, calc(var(--itemZ) * var(--cameraSpeed) * 16 * -0.3px));
  }

  .Road{
    width: 80% !important;
  }
  .Card .Pol{
    height: 150px !important;
    width: 15px !important;
  }
  .Card h2{
    font-size: 18px !important;
  }
  .mountains{
    transform: translate3D(0%, 182%, 0) !important;
  }
  .cloud1{
    top: 70px !important;
    right: 10px !important;
  }
  .cloud2{
    top: 60px;
    left: 30px;
  }
  .trees{
    transform: translate(-150px, 150px) !important;
  }


}





.pers{
  width: 100%;
  background: linear-gradient(#83f33e 50%, #a09473);
  overflow: hidden;
  position: fixed;
  /* margin-top: -11.5em; */

  will-change: perspective-origin;
  /* transform: translate3d(0, 0, 0); */
  z-index: -2;
  /* height: 200vh; */
  top: 50%;
  left: 0%;
  height: 403vh;
  transform: translateZ(calc(var(--cameraZ) * 1px)) rotateX(90deg);
  will-change: transform;
  margin-top: -1090px;
}

 .Card:nth-of-type(odd) .Pol{
  position: absolute;
  bottom: -1;
  right: 0;
  background: #3c3c3c;
  height: 220px;
  width: 30px;
}

 .Card:nth-of-type(even) .Pol{
  position: absolute;
  bottom: -1;
  left: 0;
  background: #3c3c3c;
  height: 220px;
  width: 30px;
}

.Road{
  width: 20%;
  margin: 0 auto;
  background-color: rgb(60, 60, 60);
  height: 400vh;
  border-right: 1.5vw solid;
  border-left: 1.5vw solid;
  border-color: #a49979;
  background-size: 55% 5%;
  transform-style: preserve-3d;
  animation: drive 3s linear infinite;
  transform-style: preserve-3d;
  /* margin-top: -20px; */
  top: 50%;
  left: 0;
  perspective: 30px;
  perspective-origin: 50% -30%;
  border-right: 1.5vw solid;
  border-left: 1.5vw solid;
  border-color: #a49979;
  background: linear-gradient(to right, #3c3c3c 90%, transparent 90%), linear-gradient(#3c3c3c 30%, #d7d325 30%, #d7d325 60%, #3c3c3c 60%);
  background-size: 55% 5%;
}

.mountains{
  transform: translate3D(0%, 3%, 0);
}

.trees{
  transform: translateY(50px);
}

.sun{
  position: absolute;
  top: 10px;
  right: 10px;
  width: 100px;
  height: 100px;
  border-radius: 9999px;
  background: yellow;
}
.cloud1{
  position: absolute;
  top: 60px;
  right: 20px;
}
.cloud2{
  position: absolute;
  top: 60px;
  left: 30px;
}

</style>
</head>
<body>
  
  <div class="viewport" id="viewport">
    
    <div class="scene3D-container">
        <div class="sun"></div>
        <div class="cloud1">
          <svg height="347" width="168" id="cloud1">
            <g>
                <polygon points="0,30 8,19 27,18 22,36 9,37" fill="#d5d6e2" />
                <polygon points="0,30 9,37 3,50" fill="#c7c2d1" />
                <polygon points="3,50 9,37 22,36 33,44 14,55" fill="#a8a9b7" />
                <polygon points="14,55 33,44 36,52 23,58" fill="#7a7789" />
                <polygon points="27,18 22,36 33,44" fill="#acabb9" />
    
                <polygon points="31,11 51,4 66,1 83,13 83,23 78,23" fill="#fff6e7" />
                <polygon points="27,18 31,11 54,6 56,32 33,40 29,36" fill="#d0d0dc" />
                <polygon points="29,36 58,65 42,67 31,57" fill="#9694a3" />
                <polygon points="33,40 56,32 75,37 58,65" fill="#a2a1b1" />
                <polygon points="58,65 75,37 82,57" fill="#9897a7" />
                <polygon points="56,32 54,6 80,14 82,57 75,37" fill="#d7d6e2" />
    
                <polygon points="80,15 84,17 88,30 85,50 81,51" fill="#9d9da9" />
                <polygon points="90,16 82,20 81,31 95,35" fill="#cdcdda" />
                <polygon points="81,31 82,47 95,35" fill="#a2a2b0" />
                <polygon points="82,47 95,35 105,45 91,53" fill="#878892" />
                <polygon points="105,45 95,35 106,22" fill="#fbe5d5" />
                <polygon points="106,22 95,35 90,16" fill="#dbd6dd" />
            </g>
        </svg>
        </div>
        <div class="cloud2">
          <svg height="347" width="168" id="cloud1">
            <g>
                <polygon points="0,30 8,19 27,18 22,36 9,37" fill="#d5d6e2" />
                <polygon points="0,30 9,37 3,50" fill="#c7c2d1" />
                <polygon points="3,50 9,37 22,36 33,44 14,55" fill="#a8a9b7" />
                <polygon points="14,55 33,44 36,52 23,58" fill="#7a7789" />
                <polygon points="27,18 22,36 33,44" fill="#acabb9" />
    
                <polygon points="31,11 51,4 66,1 83,13 83,23 78,23" fill="#fff6e7" />
                <polygon points="27,18 31,11 54,6 56,32 33,40 29,36" fill="#d0d0dc" />
                <polygon points="29,36 58,65 42,67 31,57" fill="#9694a3" />
                <polygon points="33,40 56,32 75,37 58,65" fill="#a2a1b1" />
                <polygon points="58,65 75,37 82,57" fill="#9897a7" />
                <polygon points="56,32 54,6 80,14 82,57 75,37" fill="#d7d6e2" />
    
                <polygon points="80,15 84,17 88,30 85,50 81,51" fill="#9d9da9" />
                <polygon points="90,16 82,20 81,31 95,35" fill="#cdcdda" />
                <polygon points="81,31 82,47 95,35" fill="#a2a2b0" />
                <polygon points="82,47 95,35 105,45 91,53" fill="#878892" />
                <polygon points="105,45 95,35 106,22" fill="#fbe5d5" />
                <polygon points="106,22 95,35 90,16" fill="#dbd6dd" />
            </g>
        </svg>
        </div>
        <div class="mountains">
          <div class="range">
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
          </div>
          <div class="range">
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
              <div class="mountain"></div>
          </div>
        </div>
      <!-- </div> -->
      <div class="pers">
        <div class="text-black bg-white Road">
        </div>
      </div>
      <div class="scene3D ">
      </div>
    </div>
  </div>
</body>
<script>

// const perspectiveOrigin = {
//   x: parseFloat(
//     getComputedStyle(document.documentElement).getPropertyValue(
//       "--scenePerspectiveOriginX"
//     )
//   ),
//   y: parseFloat(
//     getComputedStyle(document.documentElement).getPropertyValue(
//       "--scenePerspectiveOriginY"
//     )
//   ),
//   maxGap: 10
// };

function createFilmItem(story) {
  return `<div class="Card">
    <h2>${story.title}</h2>
    <p>Year: ${story.release_date}</p>
    <p>${story.description}</p>
    <div class="Pol">
      <div>
        
    <svg class="trees">
        <g class="tree" id="tree" transform="translate(400,30)">
            <polygon points="25,75 27,44 21,34 25,33 30,41 38,33 40,34 31,46 29,75" fill="#3f2145" />
            <polygon points="29,75 31,46 32,45 32,74" fill="#812743" />

            <polygon points="2,21 11,33 20,32 27,29 32,23 24,35 11,34" fill="#282246" />
            <polygon points="27,29 33,13 18,0 29,2 37,13 32,23" fill="#6a7749" />

            <polygon points="33,23 35,32 45,37 55,27 44,35 37,31" fill="#210f3f" />
            <polygon points="37,31 38,17 46,17 50,31" fill="#354346" />
            <polygon points="37,31 50,31 45,37" fill="#292941" />
            <polygon points="33,23 37,31 38,17" fill="#2b2d42" />
            <polygon points="38,17 46,17 46,11" fill="#495e4b" />
            <polygon points="46,17 46,11 54,18" fill="#5b7049" />
            <polygon points="44,11 54,18 56,26 50,31" fill="#515d49" />

            <polygon points="11,33 20,32 27,29 15,19" fill="#292e42" />
            <polygon points="27,29 33,13 15,19" fill="#424f46" />
            <polygon points="33,13 18,0 15,19" fill="#48604a" />
            <polygon points="18,0 7,5 15,19" fill="#3a5449" />
            <polygon points="7,5 0,18 15,19" fill="#344847" />
            <polygon points="0,18 11,33 15,19" fill="#292c4b" />

            <polygon points="175,4 121,10 53,12 12,16 5,20 47,22 122,12 180,4" fill="#648155" transform="translate(-148,70)" />
        </g>

        <use x="-115" y="-23" xlink:href="#tree" transform="scale(0.8)" />
        <use x="-220" y="-20" xlink:href="#tree" />
        <use x="540" y="-30" xlink:href="#tree" />
        <use x="480" y="-20" xlink:href="#tree" />
        <use x="440" y="-15" xlink:href="#tree" transform="scale(1.2)" />

      </svg>  
      </div>
    </div>
  </div>`;
}

let stories = [
  {title: 'G-Designer', release_date:'2003', description: 'JSP/Servlet, 92% Productivity Hike'},
  {title: 'S-Designer Initilaized', release_date:'2008', description: 'S-Deginer was born'},
  {title: 'S-Designer Reday to Fly', release_date:'2011', description: 'S-Designer Reaching out to skies'},
  {title: '40+ Success Stories', release_date:'2011-2020', description: 'Great Success stories'},
  {title: 'LCNC Revolution', release_date:'2020', description: 'LCNC Revolution Started'},
  {title: 'iBlink Incorporation', release_date:'2021', description: 'iBlink Incorporation'},
]

function appendFilms(stories) {
  const storyEl = document.querySelector(".viewport .scene3D");
  let storyNodes = [
    // "<div class='hill'><svg height='390' width='550' id='mountains'><polygon points='300,390 190,90 320,130 400,340' fill='#5d2042' /><polygon points='0,340 108,190 194,100 201,120 301,390' fill='#320e40' /><polygon points='14,348 117,174 194,102 172,377' fill='#3b1642' fill-opacity='0.8' /><polygon points='120,174 194,102 233,206 144,275' fill='#3d1744' fill-opacity='0.9' /><polygon points='233,206 288,177 324,214' fill='#421943' /><polygon points='233,206 324,214 247,245' fill='#3e1743' /><polygon points='247,245 324,214 360,360' fill='#411842' /><polygon points='324,214 288,177 350,210' fill='#632242' /><polygon points='324,214 350,210 360,360' fill='#652343' /><g id='apex'><polygon points='108,190 170,40 194,100' fill='#aeacb9' /><polygon points='170,40 234,6 260,70 288,178 194,102' fill='#ceced8' /><polygon points='234,6 290,80 320,132 288,178' fill='#ffffed' /></g></svg></div>"
  ];

  for (story of stories) {
    storyNodes.push(createFilmItem(story));
  }
  
  storyEl.innerHTML = storyNodes.join(" ");
}
appendFilms(stories)
window.addEventListener("scroll", moveCamera);
// window.addEventListener("mousemove", moveCameraAngle);
setSceneHeight();



function moveCamera() {
  document.documentElement.style.setProperty("--cameraZ", window.pageYOffset);
}


function setSceneHeight() {
  const numberOfItems = stories.length;
  const itemZ = parseFloat(
    getComputedStyle(document.documentElement).getPropertyValue("--itemZ")
  );
  const scenePerspective = parseFloat(
    getComputedStyle(document.documentElement).getPropertyValue(
      "--scenePerspective"
    )
  );
  const cameraSpeed = parseFloat(
    getComputedStyle(document.documentElement).getPropertyValue("--cameraSpeed")
  );

  const height =
    100 +
    scenePerspective * cameraSpeed +
    itemZ * cameraSpeed * numberOfItems;

  document.documentElement.style.setProperty("--viewportHeight", height);
}

// function moveCameraAngle(event) {
//   const xGap =
//     (((event.clientX - window.innerWidth / 2) * 100) /
//       (window.innerWidth / 2)) *
//     -1;
//   const yGap =
//     (((event.clientY - window.innerHeight / 2) * 100) /
//       (window.innerHeight / 2)) *
//     -1;
//   const newPerspectiveOriginX =
//     perspectiveOrigin.x + (xGap * perspectiveOrigin.maxGap) / 100;
//   const newPerspectiveOriginY =
//     perspectiveOrigin.y + (yGap * perspectiveOrigin.maxGap) / 100;

//   document.documentElement.style.setProperty(
//     "--scenePerspectiveOriginX",
//     newPerspectiveOriginX
//   );
//   document.documentElement.style.setProperty(
//     "--scenePerspectiveOriginY",
//     newPerspectiveOriginY
//   );
// }


</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

</html>
